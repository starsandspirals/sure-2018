<?xml version="1.0" encoding="utf-8"?>
<gpu:xmodel xmlns:gpu="http://www.dcs.shef.ac.uk/~paul/XMMLGPU" 
  xmlns="http://www.dcs.shef.ac.uk/~paul/XMML">
  <name>HostAgentCreation</name>
  <gpu:environment>
    <gpu:constants>
      <gpu:variable>
        <type>float</type>
        <name>TIME_STEP</name>
        <defaultValue>1.0</defaultValue>
      </gpu:variable>
      <gpu:variable>
        <type>float</type>
        <name>SCALE_FACTOR</name>
        <defaultValue>0.01</defaultValue>
      </gpu:variable>
      <gpu:variable>
        <type>unsigned int</type>
        <name>MAX_AGE</name>
        <defaultValue>100</defaultValue>
      </gpu:variable>
      <gpu:variable>
        <type>unsigned int</type>
        <name>RANDOM_AGES</name>
        <defaultValue>1</defaultValue>
      </gpu:variable>
      <gpu:variable>
        <type>float</type>
        <name>STARTING_POPULATION</name>
        <defaultValue>30000.0</defaultValue>
      </gpu:variable>
    </gpu:constants>

    <gpu:functionFiles>
      <file>functions.c</file>
    </gpu:functionFiles>

    <gpu:initFunctions>
      <gpu:initFunction>
        <gpu:name>initialiseHost</gpu:name>
      </gpu:initFunction>
      <gpu:initFunction>
        <gpu:name>generateAgentsInit</gpu:name>
      </gpu:initFunction>
    </gpu:initFunctions>

    <gpu:exitFunctions>
      <gpu:exitFunction>
        <gpu:name>exitFunction</gpu:name>
      </gpu:exitFunction>
    </gpu:exitFunctions>

    <gpu:stepFunctions>
      <gpu:stepFunction>
        <gpu:name>generatePersonStep</gpu:name>
      </gpu:stepFunction>
      <gpu:stepFunction>
        <gpu:name>customOutputStepFunction</gpu:name>
      </gpu:stepFunction>
    </gpu:stepFunctions>

  </gpu:environment>
  <xagents>
    <gpu:xagent>
      <name>Person</name>
      <memory>
        <gpu:variable>
          <type>unsigned int</type>
          <name>id</name>
        </gpu:variable>
        <gpu:variable>
          <type>unsigned int</type>
          <name>age</name>
          <defaultValue>0</defaultValue>
        </gpu:variable>
        <gpu:variable>
          <type>unsigned int</type>
          <name>gender</name>
        </gpu:variable>
        <gpu:variable>
          <type>unsigned int</type>
          <name>householdsize</name>
        </gpu:variable>
      </memory>
      <functions>
        <gpu:function>
          <name>update</name>
          <currentState>default</currentState>
          <nextState>default</nextState>
          <gpu:reallocate>true</gpu:reallocate>
          <gpu:RNG>true</gpu:RNG>
        </gpu:function>
      </functions>
      <states>
        <gpu:state>
          <name>default</name>
        </gpu:state>
        <gpu:state>
          <name>s2</name>
        </gpu:state>
        <initialState>default</initialState>
      </states>
      <gpu:type>continuous</gpu:type>
      <gpu:bufferSize>32768</gpu:bufferSize>
    </gpu:xagent>
    <gpu:xagent>
      <name>Household</name>
      <memory>
        <gpu:variable>
          <type>unsigned int</type>
          <name>id</name>
        </gpu:variable>
        <gpu:variable>
          <type>unsigned int</type>
          <name>size</name>
        </gpu:variable>
        <gpu:variable>
          <type>int</type>
          <name>people</name>
          <arrayLength>32</arrayLength>
          <defaultValue>-1</defaultValue>
        </gpu:variable>
        <gpu:variable>
          <type>unsigned int</type>
          <name>churchgoing</name>
        </gpu:variable>
        <gpu:variable>
          <type>unsigned int</type>
          <name>churchfreq</name>
        </gpu:variable>
      </memory>
      <functions>
        <gpu:function>
          <name>hhupdate</name>
          <currentState>hhdefault</currentState>
          <nextState>hhdefault</nextState>
          <gpu:reallocate>false</gpu:reallocate>
          <gpu:RNG>false</gpu:RNG>
        </gpu:function>
      </functions>
      <states>
        <gpu:state>
          <name>hhdefault</name>
        </gpu:state>
        <initialState>hhdefault</initialState>
      </states>
      <gpu:type>continuous</gpu:type>
      <gpu:bufferSize>8192</gpu:bufferSize>
    </gpu:xagent>
    <gpu:xagent>
      <name>Church</name>
      <memory>
        <gpu:variable>
          <type>unsigned int</type>
          <name>id</name>
        </gpu:variable>
        <gpu:variable>
          <type>unsigned int</type>
          <name>size</name>
        </gpu:variable>
        <gpu:variable>
          <type>unsigned int</type>
          <name>duration</name>
        </gpu:variable>
        <gpu:variable>
          <type>int</type>
          <name>households</name>
          <arrayLength>64</arrayLength>
          <defaultValue>-1</defaultValue>
        </gpu:variable>
      </memory>
      <functions>
        <gpu:function>
          <name>chuupdate</name>
          <currentState>chudefault</currentState>
          <nextState>chudefault</nextState>
          <gpu:reallocate>false</gpu:reallocate>
          <gpu:RNG>false</gpu:RNG>
        </gpu:function>
      </functions>
      <states>
        <gpu:state>
          <name>chudefault</name>
        </gpu:state>
        <initialState>chudefault</initialState>
      </states>
      <gpu:type>continuous</gpu:type>
      <gpu:bufferSize>2048</gpu:bufferSize>
    </gpu:xagent>
  </xagents>
  <messages>
  </messages>
  <layers>
    <layer>
      <gpu:layerFunction>
        <name>update</name>
      </gpu:layerFunction>
    </layer>
  </layers>


</gpu:xmodel>

